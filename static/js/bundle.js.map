{"version":3,"sources":["webpack:///webpack/bootstrap a9b56ef498c68533d217","webpack:///./assets/ts/components/display.ts","webpack:///./assets/ts/components/position.ts","webpack:///./assets/ts/prefabs/entity.ts","webpack:///./assets/ts/sprite.ts","webpack:///./assets/ts/components/collision.ts","webpack:///./assets/ts/game.ts","webpack:///./assets/ts/components/animation.ts","webpack:///./assets/ts/components/input.ts","webpack:///./assets/ts/components/velocity.ts","webpack:///./assets/ts/engine.ts","webpack:///./assets/ts/main.ts","webpack:///./assets/ts/nodes/animation.ts","webpack:///./assets/ts/nodes/collision.ts","webpack:///./assets/ts/nodes/control.ts","webpack:///./assets/ts/nodes/level.ts","webpack:///./assets/ts/nodes/move.ts","webpack:///./assets/ts/nodes/render.ts","webpack:///./assets/ts/prefabs/background.ts","webpack:///./assets/ts/prefabs/ground.ts","webpack:///./assets/ts/prefabs/level.ts","webpack:///./assets/ts/prefabs/player.ts","webpack:///./assets/ts/prefabs/sky.ts","webpack:///./assets/ts/settings.ts","webpack:///./assets/ts/systems/animation.ts","webpack:///./assets/ts/systems/collision.ts","webpack:///./assets/ts/systems/control.ts","webpack:///./assets/ts/systems/level.ts","webpack:///./assets/ts/systems/move.ts","webpack:///./assets/ts/systems/render.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzCA;AACA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0JAA0J;AACtM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,0CAA0C,uJAAuJ;AACjM;AACA;AACA;AACA;AACA,6CAA6C,4JAA4J;AACzM;AACA;AACA;AACA;AACA,+CAA+C,6LAA6L;AAC5O;AACA;AACA;AACA;AACA,2CAA2C,6HAA6H;AACxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,4DAA4D,eAAe,EAAE;AAC7E;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a9b56ef498c68533d217","/// <reference path=\"../../dts/pixi.js.d.ts\" />\n\"use strict\";\nexports.__esModule = true;\nvar DisplayComponent = (function () {\n    function DisplayComponent(sprite) {\n        this[\"class\"] = 'display';\n        this.sprite = sprite;\n        this.isFocus = false;\n    }\n    return DisplayComponent;\n}());\nexports[\"default\"] = DisplayComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/display.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar PositionComponent = (function () {\n    function PositionComponent() {\n        this[\"class\"] = 'position';\n        this.x = 0;\n        this.y = 0;\n        this.isPlayer = false;\n    }\n    return PositionComponent;\n}());\nexports[\"default\"] = PositionComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/position.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar Entity = (function () {\n    function Entity() {\n        this.id = this._generateUUID();\n        this.isActive = true;\n        this.components = {};\n    }\n    Entity.prototype._generateUUID = function () {\n        var d = new Date().getTime();\n        if (window.performance && typeof window.performance.now === \"function\") {\n            d += performance.now(); //use high-precision timer if available\n        }\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return uuid;\n    };\n    Entity.prototype.addComponent = function (component) {\n        this.components[component[\"class\"]] = component;\n    };\n    Entity.prototype.addComponents = function () {\n        var _this = this;\n        var components = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            components[_i] = arguments[_i];\n        }\n        components.map(function (component) {\n            _this.components[component[\"class\"]] = component;\n        });\n    };\n    Entity.prototype.removeComponent = function (componentClass) {\n        this.components[componentClass] = null;\n    };\n    Entity.prototype.destroy = function () {\n        console.log('destroy');\n    };\n    return Entity;\n}());\nexports[\"default\"] = Entity;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/entity.ts\n// module id = 2\n// module chunks = 0","/// <reference path=\"../dts/pixi.js.d.ts\" />\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar Sprite = (function (_super) {\n    __extends(Sprite, _super);\n    function Sprite(args) {\n        var _this = _super.call(this, args) || this;\n        _this.data = { texture: [] };\n        return _this;\n    }\n    return Sprite;\n}(PIXI.Sprite));\nexports[\"default\"] = Sprite;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/sprite.ts\n// module id = 3\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar CollisionComponent = (function () {\n    function CollisionComponent() {\n        this[\"class\"] = 'collision';\n        this.type = '';\n        this.collide = function () {\n            // console.log('COLLIDE');\n        };\n    }\n    return CollisionComponent;\n}());\nexports[\"default\"] = CollisionComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/collision.ts\n// module id = 4\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar settings_1 = require(\"./settings\");\nvar engine_1 = require(\"./engine\");\nvar animation_1 = require(\"./systems/animation\");\nvar collision_1 = require(\"./systems/collision\");\nvar control_1 = require(\"./systems/control\");\nvar level_1 = require(\"./systems/level\");\nvar move_1 = require(\"./systems/move\");\nvar render_1 = require(\"./systems/render\");\nvar Game = (function () {\n    function Game() {\n        console.log('GAME');\n    }\n    Game.prototype.init = function () {\n        PIXI.loader.add('player', '/static/img/player.png');\n        PIXI.loader.add('bg', '/static/img/bg.png');\n        PIXI.loader.add('level1', '/assets/json/levelone.json');\n        PIXI.loader.load(this._onLoad.bind(this));\n    };\n    Game.prototype._onLoad = function () {\n        this._settings = new settings_1[\"default\"]();\n        this._engine = new engine_1[\"default\"]();\n        this._engine.addSystem(new animation_1[\"default\"](this._settings));\n        this._engine.addSystem(new move_1[\"default\"](this._settings));\n        this._engine.addSystem(new render_1[\"default\"](this._settings));\n        this._engine.addSystem(new control_1[\"default\"](this._settings));\n        this._engine.addSystem(new collision_1[\"default\"](this._settings));\n        this._engine.addSystem(new level_1[\"default\"](this._settings));\n        this._engine.init();\n    };\n    return Game;\n}());\nexports[\"default\"] = Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/game.ts\n// module id = 5\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar AnimationComponent = (function () {\n    function AnimationComponent() {\n        this[\"class\"] = 'animation';\n        this[\"default\"] = [0];\n        this.walkRight = [1, 2];\n        this.walkLeft = [2, 1];\n        this.jump = [3];\n        this.currentAnimationProp = 'default';\n        this.currentFrame = 0;\n    }\n    return AnimationComponent;\n}());\nexports[\"default\"] = AnimationComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/animation.ts\n// module id = 6\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar InputComponent = (function () {\n    function InputComponent() {\n        this[\"class\"] = 'input';\n    }\n    return InputComponent;\n}());\nexports[\"default\"] = InputComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/input.ts\n// module id = 7\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar VelocityComponent = (function () {\n    function VelocityComponent() {\n        this[\"class\"] = 'velocity';\n        this.accelerationX = 0;\n        this.accelerationY = 0;\n        this.maxAccelerationX = 3;\n        this.maxAccelerationY = 4;\n        this.velocityX = 0;\n        this.velocityY = 0;\n        this.isGrounded = false;\n    }\n    return VelocityComponent;\n}());\nexports[\"default\"] = VelocityComponent;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/components/velocity.ts\n// module id = 8\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar move_1 = require(\"./nodes/move\");\nvar render_1 = require(\"./nodes/render\");\nvar control_1 = require(\"./nodes/control\");\nvar collision_1 = require(\"./nodes/collision\");\nvar animation_1 = require(\"./nodes/animation\");\nvar level_1 = require(\"./nodes/level\");\nvar Engine = (function () {\n    function Engine() {\n        this.entities = [];\n        this.systems = [];\n        this.nodes = [];\n        this.typedNodes = {};\n        this.isPaused = false;\n    }\n    Engine.prototype.init = function () {\n        this.update();\n    };\n    Engine.prototype.addEntity = function (entity) {\n        this.entities.push(entity);\n        if (entity.components.display && entity.components.position) {\n            // render\n            this.typedNodes['render'] = this.typedNodes['render'] || [];\n            this.typedNodes['render'].push({ entityId: entity.id, \"class\": 'render', data: new render_1[\"default\"](entity.id, entity.components.display, entity.components.position), isActive: true });\n        }\n        if (entity.components.animation && entity.components.display && entity.components.velocity) {\n            this.typedNodes['animation'] = this.typedNodes['animation'] || [];\n            // animation\n            this.typedNodes['animation'].push({\n                entityId: entity.id,\n                \"class\": 'animation',\n                data: new animation_1[\"default\"](entity.id, entity.components.animation, entity.components.display, entity.components.velocity),\n                isActive: true\n            });\n        }\n        if (entity.components.velocity && entity.components.position) {\n            this.typedNodes['move'] = this.typedNodes['move'] || [];\n            // move\n            this.typedNodes['move'].push({ entityId: entity.id, \"class\": 'move', data: new move_1[\"default\"](entity.id, entity.components.position, entity.components.velocity), isActive: true });\n        }\n        if (entity.components.velocity && entity.components.input) {\n            this.typedNodes['control'] = this.typedNodes['control'] || [];\n            // control\n            this.typedNodes['control'].push({ entityId: entity.id, \"class\": 'control', data: new control_1[\"default\"](entity.id, entity.components.control, entity.components.velocity), isActive: true });\n        }\n        if (entity.components.collision) {\n            this.typedNodes['collision'] = this.typedNodes['collision'] || [];\n            // collision\n            this.typedNodes['collision'].push({ entityId: entity.id, \"class\": 'collision', data: new collision_1[\"default\"](entity.id, entity.components.collision, entity.components.display, entity.components.velocity), isActive: true });\n        }\n        if (entity.components.position) {\n            this.typedNodes['level'] = this.typedNodes['level'] || [];\n            // level\n            this.typedNodes['level'].push({ entityId: entity.id, \"class\": 'level', data: new level_1[\"default\"](entity.id, entity.components.position), isActive: true });\n        }\n        return entity;\n    };\n    Engine.prototype.addEntities = function (entities) {\n        if (entities && entities.length) {\n            entities.map(this.addEntity.bind(this));\n        }\n    };\n    Engine.prototype.removeEntity = function (entity) {\n        var entityId = entity.id;\n        this.entities = this.entities.filter(function (entity) {\n            return entity.id !== entityId;\n        });\n    };\n    Engine.prototype.removeEntityById = function (entityId) {\n        var entities = this.getEntitiesById(entityId);\n        return entities.map(this.removeEntity.bind(this));\n    };\n    Engine.prototype.removeEntitiesById = function (ids) {\n        return ids.map(this.removeEntityById.bind(this));\n    };\n    Engine.prototype.addSystem = function (system) {\n        this.systems.push(system);\n        system.init();\n    };\n    Engine.prototype.removeSystem = function (system) {\n        system.stop();\n        system = null;\n        this.systems = this.systems.filter(function (system) {\n            return !!system;\n        });\n    };\n    Engine.prototype.getEntitiesById = function (entityId) {\n        return this.entities.filter(function (entity) {\n            return entity.id === entityId;\n        });\n    };\n    Engine.prototype.update = function (before) {\n        var _this = this;\n        if (before === void 0) { before = 0; }\n        this.isPaused = false;\n        if (document.visibilityState !== 'visible') {\n            this.isPaused = true;\n        }\n        var now = performance.now();\n        var dt = (now - before) / 1000;\n        dt = Math.min(dt, 0.1); // magic number to prevent massive dt when tab not active\n        if (!this.isPaused) {\n            var nodes = Object.keys(this.typedNodes).map(function (type) {\n                return _this.typedNodes[type];\n            });\n            [].concat.apply([], nodes).filter(function (node) {\n                return !node.isActive;\n            }).map(function (node) {\n                return node.entityId;\n            }).filter(function (value, index, array) {\n                return array.indexOf(value) === index;\n            }).map(function (id) {\n                return _this.getEntitiesById(id);\n            }).map(function (entity) {\n                return entity.destroy();\n            });\n            var results_1 = [];\n            this.systems.map(function (system) {\n                results_1.push(system.update(dt, _this.typedNodes[system[\"class\"]] || []));\n            });\n            results_1 = results_1.filter(function (result) { return result; });\n            var newEntities = results_1.map(function (result) {\n                return result.newEntities;\n            })[0];\n            var deadEntities = results_1.map(function (result) {\n                return result.deadEntities;\n            });\n            this.addEntities(newEntities);\n        }\n        before = now;\n        requestAnimationFrame(this.update.bind(this, before));\n    };\n    return Engine;\n}());\nexports[\"default\"] = Engine;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/engine.ts\n// module id = 9\n// module chunks = 0","/// <reference path=\"../dts/pixi.js.d.ts\" />\n\"use strict\";\nexports.__esModule = true;\nvar game_1 = require(\"./game\");\nvar Main = (function () {\n    function Main() {\n        this.tbgscratch = new game_1[\"default\"]();\n        this.tbgscratch.init();\n    }\n    return Main;\n}());\nexports[\"default\"] = Main;\nnew Main();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/main.ts\n// module id = 10\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar AnimationNode = (function () {\n    function AnimationNode(entityId, animationComponent, displayComponent, velocityComponent) {\n        this.entityId = entityId;\n        this.animation = animationComponent;\n        this.display = displayComponent;\n        this.velocity = velocityComponent;\n        this.isActive = true;\n    }\n    return AnimationNode;\n}());\nexports[\"default\"] = AnimationNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/animation.ts\n// module id = 11\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar CollisionNode = (function () {\n    function CollisionNode(entityId, collisionComponent, displayComponent, velocityComponent) {\n        this.entityId = entityId;\n        this.collision = collisionComponent;\n        this.display = displayComponent;\n        this.velocity = velocityComponent;\n        this.isActive = true;\n    }\n    return CollisionNode;\n}());\nexports[\"default\"] = CollisionNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/collision.ts\n// module id = 12\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar ControlNode = (function () {\n    function ControlNode(entityId, inputComponent, velocityComponent) {\n        this.entityId = entityId;\n        this.input = inputComponent;\n        this.velocity = velocityComponent;\n        this.isActive = true;\n    }\n    return ControlNode;\n}());\nexports[\"default\"] = ControlNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/control.ts\n// module id = 13\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar LevelNode = (function () {\n    function LevelNode(entityId, positionComponent) {\n        this.entityId = entityId;\n        this.position = positionComponent;\n        this.isActive = true;\n    }\n    return LevelNode;\n}());\nexports[\"default\"] = LevelNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/level.ts\n// module id = 14\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar MoveNode = (function () {\n    function MoveNode(entityId, positionComponent, velocityComponent) {\n        this.entityId = entityId;\n        this.position = positionComponent;\n        this.velocity = velocityComponent;\n        this.isActive = true;\n    }\n    return MoveNode;\n}());\nexports[\"default\"] = MoveNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/move.ts\n// module id = 15\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar RenderNode = (function () {\n    function RenderNode(entityId, displayComponent, positionComponent) {\n        this.entityId = entityId;\n        this.display = displayComponent;\n        this.position = positionComponent;\n        this.isActive = true;\n    }\n    return RenderNode;\n}());\nexports[\"default\"] = RenderNode;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/nodes/render.ts\n// module id = 16\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar entity_1 = require(\"./entity\");\nvar display_1 = require(\"../components/display\");\nvar position_1 = require(\"../components/position\");\nvar sprite_1 = require(\"../sprite\");\nvar GroundPrefab = (function () {\n    function GroundPrefab(type, x, y, tile) {\n        var ground = new entity_1[\"default\"]();\n        var texture;\n        if (type === 4) {\n            texture = new PIXI.Texture(PIXI.utils.TextureCache['bg'], new PIXI.Rectangle(48, 0, 14, tile));\n        }\n        else if (type === 5) {\n            texture = new PIXI.Texture(PIXI.utils.TextureCache['bg'], new PIXI.Rectangle(64, 0, 14, tile));\n        }\n        var sprite = new sprite_1[\"default\"](texture);\n        sprite.height = tile;\n        sprite.width = tile;\n        var display = new display_1[\"default\"](sprite);\n        ground.addComponent(display);\n        var positionComponent = new position_1[\"default\"]();\n        positionComponent.x = x;\n        positionComponent.y = y;\n        ground.addComponent(positionComponent);\n        return ground;\n    }\n    return GroundPrefab;\n}());\nexports[\"default\"] = GroundPrefab;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/background.ts\n// module id = 17\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar entity_1 = require(\"./entity\");\nvar display_1 = require(\"../components/display\");\nvar position_1 = require(\"../components/position\");\nvar collision_1 = require(\"../components/collision\");\nvar sprite_1 = require(\"../sprite\");\nvar GroundPrefab = (function () {\n    function GroundPrefab(x, y, tile) {\n        var ground = new entity_1[\"default\"]();\n        var texture = new PIXI.Texture(PIXI.utils.TextureCache['bg'], new PIXI.Rectangle(0, 0, 14, tile));\n        var sprite = new sprite_1[\"default\"](texture);\n        sprite.height = tile;\n        sprite.width = tile;\n        var display = new display_1[\"default\"](sprite);\n        ground.addComponent(display);\n        var positionComponent = new position_1[\"default\"]();\n        positionComponent.x = x;\n        positionComponent.y = y;\n        ground.addComponent(positionComponent);\n        var collision = new collision_1[\"default\"]();\n        collision.type = 'secondary';\n        ground.addComponent(collision);\n        return ground;\n    }\n    return GroundPrefab;\n}());\nexports[\"default\"] = GroundPrefab;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/ground.ts\n// module id = 18\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar player_1 = require(\"./player\");\nvar sky_1 = require(\"./sky\");\nvar ground_1 = require(\"./ground\");\nvar background_1 = require(\"./background\");\nvar LevelPrefab = (function () {\n    function LevelPrefab(settings, data) {\n        this.settings = settings;\n        this.data = data;\n    }\n    LevelPrefab.prototype.createLayer = function (data) {\n        var mapData = data.layers[0].data;\n        for (var i = 0, j = data.height; i < j; i++) {\n            for (var k = 0, l = data.width; k < l; k++) {\n                var val = mapData[i * data.width + k];\n                if (val === 1) {\n                    var ground = new ground_1[\"default\"](k * data.tilewidth, i * data.tilewidth, data.tileheight);\n                    data.entities.push(ground);\n                }\n            }\n        }\n    };\n    LevelPrefab.prototype.createBackgroundLayer = function (data) {\n        var mapData = data.layers[1].data;\n        for (var i = 0, j = data.height; i < j; i++) {\n            for (var k = 0, l = data.width; k < l; k++) {\n                var val = mapData[i * data.width + k];\n                if (val === 4) {\n                    var bg = new background_1[\"default\"](4, k * data.tilewidth, i * data.tilewidth, data.tileheight);\n                    data.entities.push(bg);\n                }\n                else if (val === 5) {\n                    var bg = new background_1[\"default\"](5, k * data.tilewidth, i * data.tilewidth, data.tileheight);\n                    data.entities.push(bg);\n                }\n            }\n        }\n    };\n    LevelPrefab.prototype.createLevel = function () {\n        var data = this.data;\n        var mapData = data.layers[0].data;\n        data.entities = [];\n        var sky = new sky_1[\"default\"](data.width, data.height, data.tileheight);\n        data.entities.push(sky);\n        this.createLayer(data);\n        this.createBackgroundLayer(data);\n        var player = new player_1[\"default\"](this.settings, [data.properties.startX, data.properties.startY]);\n        data.entities.push(player);\n        return data;\n    };\n    return LevelPrefab;\n}());\nexports[\"default\"] = LevelPrefab;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/level.ts\n// module id = 19\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar entity_1 = require(\"./entity\");\nvar sprite_1 = require(\"../sprite\");\nvar display_1 = require(\"../components/display\");\nvar position_1 = require(\"../components/position\");\nvar velocity_1 = require(\"../components/velocity\");\nvar input_1 = require(\"../components/input\");\nvar collision_1 = require(\"../components/collision\");\nvar animation_1 = require(\"../components/animation\");\nvar PlayerPrefab = (function () {\n    function PlayerPrefab(settings, start) {\n        var texture = PIXI.utils.TextureCache['/static/img/player.png'];\n        var sprite = new sprite_1[\"default\"](texture);\n        sprite.data.texture.push(new PIXI.Rectangle(0, 0, 16, 32));\n        sprite.data.texture.push(new PIXI.Rectangle(16, 0, 16, 32));\n        sprite.data.texture.push(new PIXI.Rectangle(32, 0, 16, 32));\n        sprite.data.texture.push(new PIXI.Rectangle(48, 0, 16, 32));\n        texture.frame = sprite.data.texture[1];\n        var player = new entity_1[\"default\"]();\n        var animation = new animation_1[\"default\"]();\n        animation.walkRight = [1, 2];\n        animation.walkLeft = [2, 1];\n        animation.jump = [3];\n        animation[\"default\"] = [0];\n        var collision = new collision_1[\"default\"]();\n        collision.type = 'primary';\n        var display = new display_1[\"default\"](sprite);\n        display.isFocus = true;\n        var positionComponent = new position_1[\"default\"]();\n        positionComponent.isPlayer = true;\n        positionComponent.x = start[0] * settings.TILE;\n        positionComponent.y = start[1] * settings.TILE;\n        var velocityComponent = new velocity_1[\"default\"]();\n        velocityComponent.accelerationY = settings.GRAVITY;\n        var inputComponent = new input_1[\"default\"]();\n        player.addComponents(inputComponent, velocityComponent, positionComponent, display, collision, animation);\n        return player;\n    }\n    return PlayerPrefab;\n}());\nexports[\"default\"] = PlayerPrefab;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/player.ts\n// module id = 20\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar entity_1 = require(\"./entity\");\nvar display_1 = require(\"../components/display\");\nvar position_1 = require(\"../components/position\");\nvar sprite_1 = require(\"../sprite\");\nvar SkyPrefab = (function () {\n    function SkyPrefab(width, height, tile) {\n        var sky = new entity_1[\"default\"]();\n        var texture = new PIXI.Texture(PIXI.utils.TextureCache['bg'], new PIXI.Rectangle(33, 0, 14, tile));\n        var sprite = new sprite_1[\"default\"](texture);\n        sprite.height = height * tile;\n        sprite.width = width * tile;\n        var display = new display_1[\"default\"](sprite);\n        sky.addComponent(display);\n        var position = new position_1[\"default\"]();\n        position.x = 0;\n        position.y = 0;\n        sky.addComponent(position);\n        return sky;\n    }\n    return SkyPrefab;\n}());\nexports[\"default\"] = SkyPrefab;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/prefabs/sky.ts\n// module id = 21\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar Settings = (function () {\n    function Settings() {\n        this.GRAVITY = 1;\n        this.FRICTION = 0.90;\n        this.TILE = 16;\n        this.MAP = [45, 30];\n        this.KEY = { SPACE: 32, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, P: 80 };\n    }\n    return Settings;\n}());\nexports[\"default\"] = Settings;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/settings.ts\n// module id = 22\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar AnimationSystem = (function () {\n    function AnimationSystem(settings) {\n        this[\"class\"] = 'animation';\n        this.settings = settings;\n        this.timer = 0;\n    }\n    AnimationSystem.prototype.init = function () {\n    };\n    AnimationSystem.prototype.stop = function () {\n    };\n    AnimationSystem.prototype.setAnimation = function (node, prop) {\n        node.data.animation.currentAnimationProp = prop;\n    };\n    AnimationSystem.prototype.updateFrame = function (node) {\n        var animationData = node.data.animation;\n        var displayData = node.data.display;\n        var frames = animationData[animationData.currentAnimationProp];\n        if (animationData.currentFrame + 1 >= frames.length) {\n            animationData.currentFrame = 0;\n        }\n        else {\n            animationData.currentFrame++;\n        }\n        displayData.sprite.texture.frame = displayData.sprite.data.texture[frames[animationData.currentFrame]];\n    };\n    AnimationSystem.prototype.update = function (dt, nodes) {\n        var _this = this;\n        nodes.map(function (node) {\n            var velocityData = node.data.velocity;\n            var animationData = node.data.animation;\n            if (velocityData.velocityY > 0.01 || velocityData.velocityY < -0.01) {\n                // play jump animation\n                _this.setAnimation(node, 'jump');\n            }\n            else if (velocityData.velocityX > 0.1) {\n                //play right animation\n                _this.setAnimation(node, 'walkRight');\n            }\n            else if (velocityData.velocityX < -0.1) {\n                //play left animation\n                _this.setAnimation(node, 'walkLeft');\n            }\n            else {\n                _this.setAnimation(node, 'default');\n            }\n            _this.timer = _this.timer + dt;\n            if (_this.timer > 0.2) {\n                _this.updateFrame(node);\n                _this.timer = dt;\n            }\n            return node;\n        });\n    };\n    return AnimationSystem;\n}());\nexports[\"default\"] = AnimationSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/animation.ts\n// module id = 23\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar CollisionSystem = (function () {\n    function CollisionSystem(settings) {\n        this[\"class\"] = 'collision';\n        this.settings = settings;\n    }\n    CollisionSystem.prototype.init = function () {\n    };\n    CollisionSystem.prototype.stop = function () {\n    };\n    CollisionSystem.prototype.isCollision = function (sprite1, sprite2) {\n        var isCollision = false;\n        if (sprite1.x < sprite2.x + sprite2.width &&\n            sprite1.x + sprite1.width > sprite2.x &&\n            sprite1.y < sprite2.y + sprite2.height &&\n            sprite1.height + sprite1.y > sprite2.y) {\n            isCollision = true;\n        }\n        return isCollision;\n    };\n    CollisionSystem.prototype.update = function (time, nodes) {\n        var _this = this;\n        var primaries = nodes.filter(function (node) {\n            return node.data.collision.type === 'primary';\n        });\n        var secondaries = nodes.filter(function (node) {\n            return node.data.collision.type !== 'primary';\n        });\n        primaries.map(function (primary) {\n            primary.data.velocity.isGrounded = false;\n            secondaries.map(function (secondary) {\n                var sprite1 = primary.data.display.sprite;\n                var sprite2 = secondary.data.display.sprite;\n                if (_this.isCollision(sprite1, sprite2)) {\n                    var velocityData = primary.data.velocity;\n                    var errorMargin = _this.settings.TILE / 2;\n                    var isBottomCollision = sprite1.y + sprite1.height > sprite2.y &&\n                        sprite1.height + sprite1.y < sprite2.y + errorMargin;\n                    var isTopCollision = sprite2.y + sprite2.height > sprite1.y &&\n                        sprite2.height + sprite2.y < sprite1.y + errorMargin;\n                    var isRightCollision = sprite1.x + sprite1.width > sprite2.x &&\n                        sprite1.x + sprite1.width < sprite2.x + errorMargin;\n                    var isLeftCollision = sprite2.x + sprite2.width > sprite1.x &&\n                        sprite2.x + sprite2.width < sprite1.x + errorMargin;\n                    // check collision\n                    if (isBottomCollision) {\n                        // velocityData.accelerationY = Math.min(0, velocityData.accelerationY);\n                        velocityData.velocityY = Math.min(0, velocityData.velocityY);\n                        velocityData.isGrounded = true;\n                    }\n                    else if (isTopCollision) {\n                        // velocityData.accelerationY = Math.max(0, velocityData.accelerationY);\n                        velocityData.velocityY = Math.max(0, velocityData.velocityY);\n                    }\n                    else if (isRightCollision) {\n                        velocityData.accelerationX = Math.min(0, velocityData.accelerationX);\n                        velocityData.velocityX = Math.min(0, velocityData.velocityX);\n                    }\n                    else if (isLeftCollision) {\n                        velocityData.accelerationX = Math.max(0, velocityData.accelerationX);\n                        velocityData.velocityX = Math.max(0, velocityData.velocityX);\n                    }\n                    primary.data.collision.collide(secondary);\n                }\n            });\n        });\n    };\n    return CollisionSystem;\n}());\nexports[\"default\"] = CollisionSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/collision.ts\n// module id = 24\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar ControlSystem = (function () {\n    function ControlSystem(settings) {\n        this[\"class\"] = 'control';\n        this.settings = settings;\n    }\n    ControlSystem.prototype.onKeyDown = function (e) {\n        var key = e.keyCode;\n        this.isJump = this.isJump || key === this.settings.KEY.SPACE;\n        this.isLeft = this.isLeft || key === this.settings.KEY.LEFT;\n        this.isUp = this.isUp || key === this.settings.KEY.UP;\n        this.isRight = this.isRight || key === this.settings.KEY.RIGHT;\n        this.isDown = this.isDown || key === this.settings.KEY.DOWN;\n    };\n    ControlSystem.prototype.onKeyUp = function (e) {\n        var key = e.keyCode;\n        this.isJump = key === this.settings.KEY.SPACE ? false : this.isJump;\n        this.isLeft = key === this.settings.KEY.LEFT ? false : this.isLeft;\n        this.isUp = key === this.settings.KEY.UP ? false : this.isUp;\n        this.isRight = key === this.settings.KEY.RIGHT ? false : this.isRight;\n        this.isDown = key === this.settings.KEY.DOWN ? false : this.isDown;\n        if (key === this.settings.KEY.P) {\n            // this.isPause = !this.isPause;\n        }\n    };\n    ControlSystem.prototype.bind = function () {\n        window.addEventListener('keydown', this.onKeyDown.bind(this), false);\n        window.addEventListener('keyup', this.onKeyUp.bind(this), false);\n    };\n    ControlSystem.prototype.unbind = function () {\n        window.removeEventListener('keydown', this.onKeyDown.bind(this), false);\n        window.removeEventListener('keyup', this.onKeyUp.bind(this), false);\n    };\n    ControlSystem.prototype.init = function () {\n        this.bind();\n    };\n    ControlSystem.prototype.stop = function () {\n    };\n    ControlSystem.prototype.update = function (time, nodes) {\n        for (var i = 0, j = nodes.length; i < j; i++) {\n            var velocityData = nodes[i].data.velocity;\n            if (this.isUp && velocityData.isGrounded) {\n                console.log('JUMP');\n                velocityData.accelerationY = -velocityData.maxAccelerationY;\n                velocityData.velocityY = -0.3;\n            }\n            else {\n                velocityData.accelerationY = 1;\n            }\n            if (this.isRight) {\n                // console.log('right');\n                velocityData.accelerationX = velocityData.maxAccelerationX;\n            }\n            else if (this.isLeft) {\n                // console.log('left');\n                velocityData.accelerationX = -velocityData.maxAccelerationX;\n            }\n            else {\n                velocityData.accelerationX = 0;\n            }\n        }\n    };\n    return ControlSystem;\n}());\nexports[\"default\"] = ControlSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/control.ts\n// module id = 25\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar level_1 = require(\"../prefabs/level\");\nvar LevelSystem = (function () {\n    function LevelSystem(settings) {\n        this[\"class\"] = 'level';\n        this.settings = settings;\n        this.isLoaded = false;\n        this.currentLevel;\n        this.levels = [{\n                data: PIXI.loader.resources.level1.data\n            }];\n    }\n    LevelSystem.prototype.init = function () {\n    };\n    LevelSystem.prototype.stop = function () {\n    };\n    LevelSystem.prototype.loadLevel = function (levelNumber) {\n        var levelData = this.levels[levelNumber].data;\n        var level = new level_1[\"default\"](this.settings, levelData);\n        return level.createLevel().entities;\n    };\n    LevelSystem.prototype.getAllEntityIds = function (nodes) {\n        var ids = nodes.map(function (node) {\n            return node.entityId;\n        });\n        ids = Array.from(new Set(ids));\n        return ids;\n    };\n    LevelSystem.prototype.loadNextLevel = function () {\n        this.isLoaded = false;\n        this.currentLevel++;\n    };\n    LevelSystem.prototype.update = function (time, nodes) {\n        var _this = this;\n        var result = {};\n        this.currentLevel = this.currentLevel || 1;\n        if (!this.isLoaded) {\n            result.newEntities = this.loadLevel(this.currentLevel - 1);\n            result.deadEntities = this.getAllEntityIds(nodes);\n            this.isLoaded = true;\n        }\n        nodes.map(function (node) {\n            // console.log(node);\n            var finishX = _this.levels[_this.currentLevel - 1].data.properties.finishX;\n            var finishY = _this.levels[_this.currentLevel - 1].data.properties.finishY;\n            var x = node.data.position.x / _this.settings.TILE;\n            var y = node.data.position.y / _this.settings.TILE;\n            // console.log(x + ' ' + y);\n            if (finishX === x && finishY === y) {\n                console.log('FINISH');\n                // this.loadNextLevel();\n            }\n        });\n        // console.log(this.levels[this.currentLevel]);\n        // console.log(this.levels[this.currentLevel - 1].data.properties.finishX);\n        return result;\n    };\n    return LevelSystem;\n}());\nexports[\"default\"] = LevelSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/level.ts\n// module id = 26\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar MoveSystem = (function () {\n    function MoveSystem(settings) {\n        this[\"class\"] = 'move';\n        this.settings = settings;\n    }\n    MoveSystem.prototype.init = function () {\n    };\n    MoveSystem.prototype.stop = function () {\n    };\n    MoveSystem.prototype.update = function (time, nodes) {\n        var _this = this;\n        nodes.map(function (node) {\n            var velocityData = node.data.velocity;\n            var positionData = node.data.position;\n            if (!velocityData.isGrounded) {\n                // limit horizontal movement in the air\n                velocityData.accelerationX = velocityData.accelerationX / 3;\n            }\n            velocityData.velocityX = (velocityData.velocityX + time * velocityData.accelerationX) * _this.settings.FRICTION;\n            if (velocityData.isGrounded) {\n                // prevent any more downwards vertical movement\n                velocityData.velocityY = Math.max(0, velocityData.velocityY);\n                // round up to tile edge\n                positionData.y = Math.floor(positionData.y / _this.settings.TILE) * _this.settings.TILE;\n            }\n            else {\n                velocityData.velocityY = (velocityData.velocityY + time * velocityData.accelerationY);\n            }\n            positionData.x += (velocityData.velocityX + time * velocityData.velocityX) * _this.settings.TILE;\n            // stop movement at map boundaries - shift this to collision system\n            positionData.x = Math.max(0, positionData.x);\n            positionData.x = Math.min(positionData.x, _this.settings.MAP[0] * _this.settings.TILE - _this.settings.TILE);\n            // cap the velocity - anything more than 0.7 and the entity might fall\n            // though the tile before collision is detected\n            var velocityY = Math.min(velocityData.velocityY + time * velocityData.velocityY, 0.5);\n            positionData.y += velocityY * _this.settings.TILE;\n            positionData.y = Math.max(0, positionData.y);\n            if (positionData.y > _this.settings.MAP[0] * _this.settings.TILE) {\n                console.log('OFF MAP');\n                node.isActive = false;\n            }\n        });\n    };\n    return MoveSystem;\n}());\nexports[\"default\"] = MoveSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/move.ts\n// module id = 27\n// module chunks = 0","\"use strict\";\nexports.__esModule = true;\nvar RenderSystem = (function () {\n    function RenderSystem(settings) {\n        this[\"class\"] = 'render';\n        this.sprites = {};\n        this.stage = {};\n        this.container = {};\n        this.settings = settings;\n    }\n    RenderSystem.prototype.init = function () {\n        this.stage = new PIXI.Application().stage;\n        this.container = new PIXI.Container();\n        this.stage.addChild(this.container);\n        this.renderer = PIXI.autoDetectRenderer(640, 480);\n        this.stage.position.x = this.renderer.width / 2; // 320\n        this.stage.position.y = this.renderer.height / 2; // 240\n        document.body.appendChild(this.renderer.view);\n    };\n    RenderSystem.prototype.stop = function () {\n    };\n    RenderSystem.prototype.update = function (time, nodes) {\n        // console.log('render update');\n        for (var i = 0, j = nodes.length; i < j; i++) {\n            var id = nodes[i].entityId;\n            var displayData = nodes[i].data.display;\n            var positionData = nodes[i].data.position;\n            if (!this.sprites.hasOwnProperty(id)) {\n                var sprite = displayData.sprite;\n                this.sprites[id] = sprite;\n                this.container.addChild(sprite);\n            }\n            // console.log(nodes[i].position);\n            // console.log(nodes[i].display);\n            displayData.sprite.position.x = positionData.x;\n            displayData.sprite.position.y = positionData.y;\n            if (displayData.isFocus) {\n                var x = displayData.sprite.x;\n                var width = displayData.sprite.width;\n                var y = displayData.sprite.y;\n                var height = displayData.sprite.height;\n                var mapWidth = this.settings.MAP[0] * this.settings.TILE;\n                var mapHeight = this.settings.MAP[1] * this.settings.TILE;\n                var screenWidth = this.renderer.width;\n                var screenHeight = this.renderer.height;\n                // console.log('mapWidth ', mapWidth);\n                // console.log('screenWidth ', screenWidth);\n                var pivotX = x < screenWidth / 2 ? screenWidth / 2 : x;\n                pivotX = x + screenWidth / 2 > mapWidth ? mapWidth - screenWidth / 2 : pivotX;\n                this.stage.pivot.x = pivotX;\n                // console.log(pivotX);\n                var pivotY = y < mapHeight / 2 ? screenHeight / 2 : y;\n                pivotY = y + screenHeight / 2 > mapHeight ? mapHeight - screenHeight / 2 : pivotY;\n                this.stage.pivot.y = pivotY;\n                // test against map width * tilesize\n                if (displayData.sprite.x < 0 ||\n                    displayData.sprite.x + displayData.sprite.width > mapWidth) {\n                    console.log('EXIT');\n                }\n                // console.log('x', this.stage.pivot.x);\n                // console.log('y', this.stage.pivot.y);\n            }\n        }\n        for (var _i = 0, _a = Object.keys(this.sprites); _i < _a.length; _i++) {\n            var id = _a[_i];\n            if (!this.sprites[id]) {\n                delete this.sprites[id];\n            }\n        }\n        this.renderer.render(this.stage);\n    };\n    return RenderSystem;\n}());\nexports[\"default\"] = RenderSystem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/ts/systems/render.ts\n// module id = 28\n// module chunks = 0"],"sourceRoot":""}